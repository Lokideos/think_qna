$('.question-update-errors').html('<%= render 'shared/errors', resource: question %>');
var questionNotice = '';

<% if !question.errors.present? %>
  $('.question-info').html(`
      <h1><%= j question.title %></h1>
      <p><%= j question.body %></p>
      <div class="question-attached-files">
        <p><%= t('.attached_files_section_headline') %></p>
        <% question.files.each do |file| %>
          <%= content_tag(:p, id: "attachment-#{file.id}") do %>
            <%= j link_to file.filename.to_s, url_for(file), class: 'attached-file-link' %> |
            <%= j link_to t('.delete_attachment'), attachment_path(id: file.id), data: { attachment_id: file.id }, method: :delete, class: 'attached-file-destroy-link', remote: true %>
          <% end %>
        <% end %>
      </div>
      <div class="links">
        <h2><%= t('.links_section_headline') %></h2>
        <ul>
          <% question.links.each do |link| %>
            <%= content_tag(:li, id: "link-#{ link.id }") do %>
              <p>
                  <%= link_to link.name, link.url %>
                  <% if link.body %>
                    <p><%= t('.gist_headline') %>></p>
                    <pre><%= link.body %></pre>
                  <% end %>
                  <p>
                    <%= link_to t('questions.show.delete_link'), link_path(id: link.id), data: { link_id: link.id }, method: :delete, class: 'attached-link-destroy', remote: true %>
                  </p>
              </p>
            <% end %>
          <% end %>
         </ul>
      </div>
  `);
  $('.edit-question-form .question-form-attached-links ul').html(`
    <% question.links.each do |link| %>
      <%= content_tag(:li, id: "link-#{ link.id }") do %>
        <p><%= link_to link.name, link.url %></p>
        <% if link.body %>
          <p><%= t('.gist_headline') %>></p>
          <pre><%= link.body %></pre>
        <% end %>
        <p><%= link_to t('answers.answer.delete_link'), link_path(id: link.id), data: {link_id: link.id}, method: :delete, class: 'attached-link-destroy', remote: true %></p>
      <% end %>
    <% end %>
  `);
  $('.question-info').show();
  $('.edit-question-link').show();
  $('.edit-question-form').addClass('hidden');
  questionNotice = '<%= t('notifications.updated', resource: question.class.model_name.human) %>';
<% else %>
  questionNotice = '<%= t('notifications.input_error') %>';
<% end %>

$('.notice').html(questionNotice);
