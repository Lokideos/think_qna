var editAnswerNotice = '';
var answerId = <%= answer.id %>;
var answerInfo = '#answer-info-' + answerId;
var answerErrors = document.querySelector('#answer-info-' + answerId + '~ .answer-errors')
$(answerErrors).html('<%= render 'shared/errors', resource: answer %>');

<% if !answer.errors.present? %>
  $(answerInfo).html(`
      <p><%= j answer.body %></p>
      <div class="answer-attached-files">
        <p>Attached files</p>
          <% answer.files.each do |file| %>
            <%= content_tag(:p, id: "answer-attachment-#{file.id}") do %>
              <%= j link_to file.filename.to_s, url_for(file), class: 'attached-file-link' %> |
              <%= j link_to 'Delete Attachment', destroy_attachment_answer_path(answer, attachment_id: file.id), method: :patch, class: 'attached-file-destroy-link', remote: true %>
            <% end %>
          <% end %>
      </div>
  `);
  $(answerInfo).show();
  $('.edit-answer-link').show();
  $('form#edit-answer-' + answerId).addClass('hidden');
  editAnswerNotice = '<%= t('notifications.updated', resource: answer.class.model_name.human) %>'
<% else %>
  editAnswerNotice = '<%= t('notifications.input_error') %>'
<% end %>

$('.notice').html(editAnswerNotice);